{"ast":null,"code":"import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { compare } from 'compare-versions';\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n} // A type of promise-like that resolves synchronously and supports only one observer\n\n\nvar _iteratorSymbol = /*#__PURE__*/typeof Symbol !== \"undefined\" ? Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\")) : \"@@iterator\";\n\nvar _asyncIteratorSymbol = /*#__PURE__*/typeof Symbol !== \"undefined\" ? Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\")) : \"@@asyncIterator\"; // Asynchronously call a function and send errors to recovery continuation\n\n\nfunction _catch(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n}\n\nfunction CacheBuster(_ref) {\n  var _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      currentVersion = _ref.currentVersion,\n      _ref$isEnabled = _ref.isEnabled,\n      isEnabled = _ref$isEnabled === void 0 ? false : _ref$isEnabled,\n      _ref$isVerboseMode = _ref.isVerboseMode,\n      isVerboseMode = _ref$isVerboseMode === void 0 ? false : _ref$isVerboseMode,\n      _ref$loadingComponent = _ref.loadingComponent,\n      loadingComponent = _ref$loadingComponent === void 0 ? null : _ref$loadingComponent,\n      onCacheClear = _ref.onCacheClear;\n\n  var _useState = useState({\n    loading: true,\n    isLatestVersion: false\n  }),\n      cacheStatus = _useState[0],\n      setCacheStatus = _useState[1];\n\n  var log = function log(message, isError) {\n    isVerboseMode && (isError ? console.error(message) : console.log(message));\n  };\n\n  useEffect(function () {\n    isEnabled ? checkCacheStatus() : log('React Cache Buster is disabled.');\n  }, []);\n\n  var checkCacheStatus = function checkCacheStatus() {\n    try {\n      var _temp2 = _catch(function () {\n        return Promise.resolve(fetch('/meta.json')).then(function (res) {\n          return Promise.resolve(res.json()).then(function (_ref2) {\n            var metaVersion = _ref2.version;\n            var shouldForceRefresh = isThereNewVersion(metaVersion, currentVersion);\n\n            if (shouldForceRefresh) {\n              log(\"There is a new version (v\" + metaVersion + \"). Should force refresh.\");\n              setCacheStatus({\n                loading: false,\n                isLatestVersion: false\n              });\n            } else {\n              log('There is no new version. No cache refresh needed.');\n              setCacheStatus({\n                loading: false,\n                isLatestVersion: true\n              });\n            }\n          });\n        });\n      }, function (error) {\n        log('An error occurred while checking cache status.', true);\n        log(error, true);\n        !isVerboseMode && setCacheStatus({\n          loading: false,\n          isLatestVersion: true\n        });\n      });\n\n      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  var isThereNewVersion = function isThereNewVersion(metaVersion, currentVersion) {\n    return compare(metaVersion, currentVersion, '>');\n  };\n\n  var refreshCacheAndReload = function refreshCacheAndReload() {\n    try {\n      return Promise.resolve(_catch(function () {\n        var _temp3 = function () {\n          var _window;\n\n          if ((_window = window) !== null && _window !== void 0 && _window.caches) {\n            var _window2 = window,\n                caches = _window2.caches;\n            return Promise.resolve(caches.keys()).then(function (cacheNames) {\n              for (var _iterator = _createForOfIteratorHelperLoose(cacheNames), _step; !(_step = _iterator()).done;) {\n                var cacheName = _step.value;\n                caches[\"delete\"](cacheName);\n              }\n\n              log('The cache has been deleted.');\n              window.location.reload(true);\n            });\n          }\n        }();\n\n        if (_temp3 && _temp3.then) return _temp3.then(function () {});\n      }, function (error) {\n        log('An error occurred while deleting the cache.', true);\n        log(error, true);\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  if (!isEnabled) {\n    return children;\n  } else {\n    if (cacheStatus.loading) {\n      return loadingComponent;\n    }\n\n    if (!cacheStatus.loading && !cacheStatus.isLatestVersion) {\n      onCacheClear && onCacheClear();\n      refreshCacheAndReload();\n      return null;\n    }\n\n    return children;\n  }\n}\n\nCacheBuster.propTypes = {\n  children: PropTypes.element.isRequired,\n  currentVersion: PropTypes.string.isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n  isVerboseMode: PropTypes.bool,\n  loadingComponent: PropTypes.element,\n  onCacheClear: PropTypes.func\n};\nexport default CacheBuster;","map":{"version":3,"sources":["/home/emarks/brown-egg-hunt/node_modules/react-cache-buster/dist/index.modern.js"],"names":["useState","useEffect","PropTypes","compare","_unsupportedIterableToArray","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","arr","len","length","i","arr2","_createForOfIteratorHelperLoose","allowArrayLike","it","Symbol","iterator","next","bind","isArray","done","value","TypeError","_iteratorSymbol","_asyncIteratorSymbol","asyncIterator","_catch","body","recover","result","e","then","CacheBuster","_ref","_ref$children","children","currentVersion","_ref$isEnabled","isEnabled","_ref$isVerboseMode","isVerboseMode","_ref$loadingComponent","loadingComponent","onCacheClear","_useState","loading","isLatestVersion","cacheStatus","setCacheStatus","log","message","isError","console","error","checkCacheStatus","_temp2","Promise","resolve","fetch","res","json","_ref2","metaVersion","version","shouldForceRefresh","isThereNewVersion","reject","refreshCacheAndReload","_temp3","_window","window","caches","_window2","keys","cacheNames","_iterator","_step","cacheName","location","reload","propTypes","element","isRequired","string","bool","func"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { compare } from 'compare-versions';\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\n// A type of promise-like that resolves synchronously and supports only one observer\n\nconst _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\nconst _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously call a function and send errors to recovery continuation\nfunction _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\nfunction CacheBuster(_ref) {\n  var _ref$children = _ref.children,\n      children = _ref$children === void 0 ? null : _ref$children,\n      currentVersion = _ref.currentVersion,\n      _ref$isEnabled = _ref.isEnabled,\n      isEnabled = _ref$isEnabled === void 0 ? false : _ref$isEnabled,\n      _ref$isVerboseMode = _ref.isVerboseMode,\n      isVerboseMode = _ref$isVerboseMode === void 0 ? false : _ref$isVerboseMode,\n      _ref$loadingComponent = _ref.loadingComponent,\n      loadingComponent = _ref$loadingComponent === void 0 ? null : _ref$loadingComponent,\n      onCacheClear = _ref.onCacheClear;\n\n  var _useState = useState({\n    loading: true,\n    isLatestVersion: false\n  }),\n      cacheStatus = _useState[0],\n      setCacheStatus = _useState[1];\n\n  var log = function log(message, isError) {\n    isVerboseMode && (isError ? console.error(message) : console.log(message));\n  };\n\n  useEffect(function () {\n    isEnabled ? checkCacheStatus() : log('React Cache Buster is disabled.');\n  }, []);\n\n  var checkCacheStatus = function checkCacheStatus() {\n    try {\n      var _temp2 = _catch(function () {\n        return Promise.resolve(fetch('/meta.json')).then(function (res) {\n          return Promise.resolve(res.json()).then(function (_ref2) {\n            var metaVersion = _ref2.version;\n            var shouldForceRefresh = isThereNewVersion(metaVersion, currentVersion);\n\n            if (shouldForceRefresh) {\n              log(\"There is a new version (v\" + metaVersion + \"). Should force refresh.\");\n              setCacheStatus({\n                loading: false,\n                isLatestVersion: false\n              });\n            } else {\n              log('There is no new version. No cache refresh needed.');\n              setCacheStatus({\n                loading: false,\n                isLatestVersion: true\n              });\n            }\n          });\n        });\n      }, function (error) {\n        log('An error occurred while checking cache status.', true);\n        log(error, true);\n        !isVerboseMode && setCacheStatus({\n          loading: false,\n          isLatestVersion: true\n        });\n      });\n\n      return Promise.resolve(_temp2 && _temp2.then ? _temp2.then(function () {}) : void 0);\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  var isThereNewVersion = function isThereNewVersion(metaVersion, currentVersion) {\n    return compare(metaVersion, currentVersion, '>');\n  };\n\n  var refreshCacheAndReload = function refreshCacheAndReload() {\n    try {\n      return Promise.resolve(_catch(function () {\n        var _temp3 = function () {\n          var _window;\n\n          if ((_window = window) !== null && _window !== void 0 && _window.caches) {\n            var _window2 = window,\n                caches = _window2.caches;\n            return Promise.resolve(caches.keys()).then(function (cacheNames) {\n              for (var _iterator = _createForOfIteratorHelperLoose(cacheNames), _step; !(_step = _iterator()).done;) {\n                var cacheName = _step.value;\n                caches[\"delete\"](cacheName);\n              }\n\n              log('The cache has been deleted.');\n              window.location.reload(true);\n            });\n          }\n        }();\n\n        if (_temp3 && _temp3.then) return _temp3.then(function () {});\n      }, function (error) {\n        log('An error occurred while deleting the cache.', true);\n        log(error, true);\n      }));\n    } catch (e) {\n      return Promise.reject(e);\n    }\n  };\n\n  if (!isEnabled) {\n    return children;\n  } else {\n    if (cacheStatus.loading) {\n      return loadingComponent;\n    }\n\n    if (!cacheStatus.loading && !cacheStatus.isLatestVersion) {\n      onCacheClear && onCacheClear();\n      refreshCacheAndReload();\n      return null;\n    }\n\n    return children;\n  }\n}\n\nCacheBuster.propTypes = {\n  children: PropTypes.element.isRequired,\n  currentVersion: PropTypes.string.isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n  isVerboseMode: PropTypes.bool,\n  loadingComponent: PropTypes.element,\n  onCacheClear: PropTypes.func\n};\n\nexport default CacheBuster;\n"]},"metadata":{},"sourceType":"module"}